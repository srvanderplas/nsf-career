<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Project description</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="ProjectDescription_files/libs/clipboard/clipboard.min.js"></script>
<script src="ProjectDescription_files/libs/quarto-html/quarto.js"></script>
<script src="ProjectDescription_files/libs/quarto-html/popper.min.js"></script>
<script src="ProjectDescription_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ProjectDescription_files/libs/quarto-html/anchor.min.js"></script>
<link href="ProjectDescription_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ProjectDescription_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ProjectDescription_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ProjectDescription_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ProjectDescription_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#research-plan" id="toc-research-plan" class="nav-link" data-scroll-target="#research-plan">Research Plan</a>
  <ul class="collapse">
  <li><a href="#background-information" id="toc-background-information" class="nav-link" data-scroll-target="#background-information">Background Information</a></li>
  <li><a href="#preliminary-data" id="toc-preliminary-data" class="nav-link" data-scroll-target="#preliminary-data">Preliminary Data</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#alternative-approaches" id="toc-alternative-approaches" class="nav-link" data-scroll-target="#alternative-approaches">Alternative Approaches</a></li>
  <li><a href="#evaluation" id="toc-evaluation" class="nav-link" data-scroll-target="#evaluation">Evaluation</a></li>
  <li><a href="#future-steps" id="toc-future-steps" class="nav-link" data-scroll-target="#future-steps">Future Steps</a></li>
  </ul></li>
  <li><a href="#education-plan" id="toc-education-plan" class="nav-link" data-scroll-target="#education-plan">Education Plan</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#design-and-methods" id="toc-design-and-methods" class="nav-link" data-scroll-target="#design-and-methods">Design and methods</a></li>
  <li><a href="#evaluation-1" id="toc-evaluation-1" class="nav-link" data-scroll-target="#evaluation-1">Evaluation</a></li>
  <li><a href="#integration-of-research-and-education" id="toc-integration-of-research-and-education" class="nav-link" data-scroll-target="#integration-of-research-and-education">Integration of research and Education</a></li>
  </ul></li>
  <li><a href="#broader-impacts" id="toc-broader-impacts" class="nav-link" data-scroll-target="#broader-impacts">Broader Impacts</a></li>
  <li><a href="#timeline" id="toc-timeline" class="nav-link" data-scroll-target="#timeline">Timeline</a></li>
  <li><a href="#results-from-prior-nsf-support" id="toc-results-from-prior-nsf-support" class="nav-link" data-scroll-target="#results-from-prior-nsf-support">Results from Prior NSF Support</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="ProjectDescription.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project description</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- https://vcresearch.berkeley.edu/sites/default/files/inline-files/CAREER_Writing_Guide_2017_final.pdf -->
<section id="objectives" class="level1">
<h1>Objectives</h1>
<!-- 1. Objectives/Specific Aims/Goals -->
<!-- Other names for these are goals, research thrusts, etc. You can call these whatever you like or whatever is most used in your field. -->
<!-- • Try to fit this information on one page. -->
<!-- • Start with a brief problem statement to introduce your research question and state why it is important. -->
<!-- • Put the solution to your research question in context of your overall, long-term career objectives. -->
<!-- • Identify the specific objective for the present proposal. -->
<!-- • Describe your overall hypothesis for your specific objective. -->
<!-- • List your specific aims for how you will accomplish the objectives of your proposal.  -->
<!--    o Each aim is to find out information, not to do a method (a method supports an aim, but is not the purpose of the aim; i.e., the aim should be outcome-oriented). -->
<!--    o Limit yourself to 2-4 aims. -->
<!--    o Be declarative (use short bullet points). -->
<!--    o Make sure aims are not inter-dependent but supportive of each other (i.e., make sure that if the first step of your proposal doesn’t turn out the way you expect, your entire proposal won't fail). -->
<!--    o Link your specific aims to hypotheses, as appropriate. -->
<!-- • Close this section with a statement on your expected outcomes, emphasizing the project's innovation. -->
<!-- • It can be very useful to try to diagram your objective and aims. -->
</section>
<section id="research-plan" class="level1">
<h1>Research Plan</h1>
<!-- 2. Research Plan -->
<!-- Note: The research and educational activities do not need to be addressed separately if the relationship between them is such that it works best to present an integrated project where the two are interspersed throughout the Project Description. -->
<section id="background-information" class="level2">
<h2 class="anchored" data-anchor-id="background-information">Background Information</h2>
<!-- a. Background information -->
<!-- This section lets you: -->
<!-- 1. Orient reader to your subject, providing scientific background and context. -->
<!-- 2. Establish the importance and novelty of your project. -->
<!-- 3. Show your knowledge of the area through a solid review and objective citation of prior related work. -->
<!-- 4. Reveal that you are aware of opportunities, gaps, and roadblocks in your field.  -->
<!-- 5. Persuade the reviewers to become invested in your work by showing how your research matters for the field and their own research. -->
<!-- Write this section in nontechnical terms for a broader audience. -->
<p>Statistical graphics are a primary way scientists communicate results to other scientists as well as the general public, but we have been arguing about best practices for the visual display of data almost since these graphical forms were created <span class="citation" data-cites="wickham2013graphical croxtonBarChartsCircle1927 eellsRelativeMeritsCircles1926"><a href="#ref-croxtonBarChartsCircle1927" role="doc-biblioref">[1]</a>, <a href="#ref-eellsRelativeMeritsCircles1926" role="doc-biblioref">[2]</a>, <a href="#ref-wickham2013graphical" role="doc-biblioref"><strong>wickham2013graphical?</strong></a></span>. Different individuals and organizations have released guidelines for graphical design <span class="citation" data-cites="JointCommitteeStandards1915 brewerGuidelinesUsePerceptual1994 kosslynGraphDesignEye2006 tufteVisualDisplayQuantitative2001"><a href="#ref-JointCommitteeStandards1915" role="doc-biblioref">[3]</a>–<a href="#ref-tufteVisualDisplayQuantitative2001" role="doc-biblioref">[6]</a></span>, but many of these are based on aesthetic preferences, individual experience, or extrapolation from limited empirical studies. Even when there are empirical studies to support guidelines for choosing one graphical form over another to increase perceptual accuracy and decrease viewer effort <span class="citation" data-cites="cleveland1984 hofmannGraphicalTestsPower2012 spenceVisualPsychophysicsSimple1990 vanderplasTestingStatisticalCharts2020"><a href="#ref-cleveland1984" role="doc-biblioref"><strong>cleveland1984?</strong></a>, <a href="#ref-hofmannGraphicalTestsPower2012" role="doc-biblioref"><strong>hofmannGraphicalTestsPower2012?</strong></a>, <a href="#ref-spenceVisualPsychophysicsSimple1990" role="doc-biblioref"><strong>spenceVisualPsychophysicsSimple1990?</strong></a>, See <a href="#ref-vanderplasTestingStatisticalCharts2020" role="doc-biblioref"><strong>vanderplasTestingStatisticalCharts2020?</strong></a> for a review</span>, these studies measure different quantities (estimation accuracy vs.&nbsp;ability to perceive a departure from a null model) in different ways (direct numerical estimation vs.&nbsp;comparative estimation of proportions) that have a potentially large effect on the generalizability of the results. There are relatively few studies which directly compare the effect of different methods for testing graphics, but minor changes to the data collection method can impact accuracy of even simple numerical estimation tasks <span class="citation" data-cites="hondaNumberBiasWisdom2022"><a href="#ref-hondaNumberBiasWisdom2022" role="doc-biblioref"><strong>hondaNumberBiasWisdom2022?</strong></a></span>; it is reasonable to expect that the specifics of the graphical testing procedure used may impact the results, potentially explaining conflicting empirically driven recommendations <span class="citation" data-cites="croxtonBarChartsCircle1927 eellsRelativeMeritsCircles1926 spenceVisualPsychophysicsSimple1990"><a href="#ref-croxtonBarChartsCircle1927" role="doc-biblioref">[1]</a>, <a href="#ref-eellsRelativeMeritsCircles1926" role="doc-biblioref">[2]</a>, <a href="#ref-spenceVisualPsychophysicsSimple1990" role="doc-biblioref"><strong>spenceVisualPsychophysicsSimple1990?</strong></a></span>.</p>
</section>
<section id="preliminary-data" class="level2">
<h2 class="anchored" data-anchor-id="preliminary-data">Preliminary Data</h2>
<!-- b. Preliminary data -->
<!-- This is the place to highlight your own preliminary data, showing your ability to develop and test hypotheses, design rigorous experiments, perform experimental techniques, and analyze and interpret data. -->
<!-- • Illustrate the relevance of your preliminary data to your specific aims/goals and how it relates to your proposed research plan. -->

<!-- • Use high quality graphics and tables to illustrate your data and results. -->
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<!-- c. Methods -->
<!-- This is generally the longest section of the research plan, where you develop the details of your project. This section is not just about methods but design. -->
<!-- Suggested format for this section: -->
<!-- D. RESEARCH DESIGN AND METHODS -->
<!-- Introductory paragraph to orient reviewer to what you plan to do. -->
<!-- D.1. Aim 1. Repeat Specific Aim from page 1. -->
<!-- D.1.a. Hypothesis and Rationale. -->
<!-- D.1.b. Experimental Plan. -->
<!-- D.1.c. Expected Outcomes/Evaluation -->
<!-- D.1.d. Potential Pitfalls and Alternative Approaches -->
<!-- When outlining your experimental plan: -->
<!-- • Base it on your specific aims—restate the aims and describe the flow of experiments for each aim. -->
<!-- • Describe methodology for each aim, establishing your expertise with the approach by linking back to your preliminary studies and assessing the strengths and limitations of your approach. -->
<!-- • Cite appropriate references. -->
<!-- • Describe the timeline and sequence of experiments. -->
<!-- • Talk about relevance to the field. -->
</section>
<section id="alternative-approaches" class="level2">
<h2 class="anchored" data-anchor-id="alternative-approaches">Alternative Approaches</h2>
<!-- d. Potential pitfalls and alternative approaches -->
<!-- Discuss the limitations of each approach you are proposing and how they may affect your results and data.  -->
<!-- • Call attention to potential difficulties and propose alternatives you will use if a technique is inadequate or the results are inconclusive. -->
<!-- • Describe potential pitfalls and what you will do if they occur. -->
<!-- • State what you will do if results are negative, how negative findings will also advance the field, and what you will do next. -->
</section>
<section id="evaluation" class="level2">
<h2 class="anchored" data-anchor-id="evaluation">Evaluation</h2>
<!-- e. Evaluation -->
<!-- Describe how you will assess your research program. -->
<!-- • Consider linking this to your timeline and/or milestones. -->
<!-- • Describe future plans. -->
<!-- • Identify what others will be able to do with your research results. -->
</section>
<section id="future-steps" class="level2">
<h2 class="anchored" data-anchor-id="future-steps">Future Steps</h2>
<!-- f. Future steps -->
</section>
</section>
<section id="education-plan" class="level1">
<h1>Education Plan</h1>
<!-- 3. Education Plan -->
<!-- Suggested length is 3-5 pages. Tips: Use first person, and refer to experiences that have informed your approach to education/teaching/mentoring.  -->
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<!-- a. Overview/background/aims -->
<!-- Frame a big picture for your education plan. Include background, motivation, rationale, and aims for each major activity in the plan (e.g., Aim 1, Aim 2, Aim 3.). Suggest limiting to 3 major aims. -->
</section>
<section id="design-and-methods" class="level2">
<h2 class="anchored" data-anchor-id="design-and-methods">Design and methods</h2>
<!-- b. Design and methods -->
<!-- For each aim listed in 3a, describe the target audience, needs/gaps to be addressed, methods, resources (including  personnel, partnerships, budget), and measurable desired outcomes (i.e., what would success look like?). -->
</section>
<section id="evaluation-1" class="level2">
<h2 class="anchored" data-anchor-id="evaluation-1">Evaluation</h2>
<!-- c. Evaluation -->
<!-- Describe how you will assess your education program. -->
<!-- • Consider linking this to your timeline. -->
<!-- Tip: Refer to the NSF User Friendly Handbook for Project Evaluation: nsf.gov/pubs/2002/nsf02057/nsf02057.pdf -->
</section>
<section id="integration-of-research-and-education" class="level2">
<h2 class="anchored" data-anchor-id="integration-of-research-and-education">Integration of research and Education</h2>
<!-- d. Integration of research and education -->
<!-- How will your research impact your education goals and how will your education activities feed back into your research? -->
</section>
</section>
<section id="broader-impacts" class="level1">
<h1>Broader Impacts</h1>
<!-- 4. Broader Impacts -->
<!-- You must include a separate section that addresses the Broader Impacts of your proposal. -->
<!-- • Must use the section heading "Broader Impacts" somewhere in your proposal. -->
<!-- • Describe the broader impacts that are intrinsic to your research, as well as those that result from your education activities. -->
<!-- • As an alternative to one section on broader impacts, you could have multiple sections throughout the proposal that are paired with each aim. In this case, be sure that you still create a separate section with the heading "Broader Impacts." -->
</section>
<section id="timeline" class="level1">
<h1>Timeline</h1>
<!-- 5. Timeline -->
<!-- This is where you show how everything will fit together. -->
<!-- • Propose an appropriate amount of work for the funding period. Reviewers are sensitive to proposals that seem “overly ambitious.” -->
<!-- • Provide a diagram of your timeline over the funding period, showing when you will hit certain milestones, or provide a list of milestones you will achieve in each year. -->
<!-- • Include key milestones for each education aim -->
</section>
<section id="results-from-prior-nsf-support" class="level1">
<h1>Results from Prior NSF Support</h1>
<!-- 6. Results from Prior NSF Support -->
<!-- Describe support from past 5 years per GPG instructions. If you have none, write “Not applicable.” Use this format: -->
<!-- (a) The NSF award number, amount and period of support. -->
<!-- (b) The title of the project. -->
<!-- (c) A summary of the results of the completed work, including accomplishments, supported by the award. The results must be separately described under two distinct headings: Intellectual Merit and Broader Impacts. -->
<!-- (d) A listing of the publications resulting from the NSF award. -->
<!-- (e) Evidence of research products and their availability, including, but not limited to: data, publications, samples, physical collections, software, and models, as described in any Data Management Plan. -->
<!-- (f) Write "Not applicable." (This section is for if the proposal is for renewed support.)  -->
<!-- If the project was recently awarded and therefore no new results exist, describe the major goals and broader impacts of the project. -->
</section>
<section id="references" class="level1">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-croxtonBarChartsCircle1927" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">F. E. Croxton and R. E. Stryker, <span>“Bar <span>Charts Versus Circle Diagrams</span>,”</span> <em>J. Am. Stat. Assoc.</em>, vol. 22, no. 160, pp. 473–482, 1927, doi: <a href="https://doi.org/10.2307/2276829">10.2307/2276829</a>. [Online]. Available: <a href="https://www.jstor.org/stable/2276829">https://www.jstor.org/stable/2276829</a>. [Accessed: Mar. 17, 2019]</div>
</div>
<div id="ref-eellsRelativeMeritsCircles1926" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">W. C. Eells, <span>“The <span>Relative Merits</span> of <span>Circles</span> and <span>Bars</span> for <span>Representing Component Parts</span>,”</span> <em>J. Am. Stat. Assoc.</em>, vol. 21, no. 154, pp. 119–132, 1926, doi: <a href="https://doi.org/10.2307/2277140">10.2307/2277140</a>. [Online]. Available: <a href="https://www.jstor.org/stable/2277140">https://www.jstor.org/stable/2277140</a>. [Accessed: Mar. 18, 2019]</div>
</div>
<div id="ref-JointCommitteeStandards1915" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline"><span>“Joint committee on standards for graphic presentation,”</span> <em>Quarterly Publications of the American Statistical Association</em>, vol. 14, no. 112, pp. 790–797, Dec. 1915, doi: <a href="https://doi.org/10.1080/15225445.1915.10503668">10.1080/15225445.1915.10503668</a>. </div>
</div>
<div id="ref-brewerGuidelinesUsePerceptual1994" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">C. A. Brewer, <span>“Guidelines for use of the perceptual dimensions of color for mapping and visualization,”</span> in <em>Color hard copy and graphic arts <span>III</span></em>, May 1994, vol. 2171, pp. 54–63, doi: <a href="https://doi.org/10.1117/12.175328">10.1117/12.175328</a>. </div>
</div>
<div id="ref-kosslynGraphDesignEye2006" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">S. M. Kosslyn, <em>Graph design for the eye and mind</em>. Oxford University Press, 2006. </div>
</div>
<div id="ref-tufteVisualDisplayQuantitative2001" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">E. Tufte, <em>The visual display of quantitative information</em>, 2nd ed. Graphics Press, 2001. </div>
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>